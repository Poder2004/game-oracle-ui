<div class="login-page-container">

  <header class="page-header">
    <span class="logo-top">Game Oracle</span>
    <span class="page-title">Sign Up</span>
  </header>

  <main class="main-content">

    <div class="character-image-container">
      <img src="assets/images/image_register.png" alt="Register Character Image">
    </div>

    <div class="info-pane">
      <mat-card class="info-card">
        <h3>ขั้นตอนง่ายๆ ในการเข้าร่วม สมาชิก GameOracle</h3>

        <ol class="steps-list">
          <li>ลงทะเบียนโดยชื่อผู้ใช้, อีเมล, รหัสผ่าน</li>
          <li>เลือกรูปโปรไฟล์</li>
          <li>กรอกแบบฟอร์มสมัครสมาชิกให้เรียบร้อย</li>
          <li>กรุณาคลิกปุ่มสร้างบัญชี</li>
        </ol>
        <button mat-flat-button class="create-account-btn" routerLink="/login">เข้าสู่ระบบ</button>
      </mat-card>
    </div>

    <div class="login-pane">
      <mat-card class="login-card">
        <mat-card-content>

          <div class="profile-pic-container">
            <img *ngIf="imagePreview" [src]="imagePreview" alt="Profile Preview">
            <button *ngIf="!imagePreview" mat-icon-button class="profile-pic-btn" (click)="fileInput.click()"
              aria-label="Upload profile picture">
              <mat-icon>photo_camera</mat-icon>
            </button>
          </div>

          <input hidden type="file" #fileInput (change)="onFileSelected($event)" accept="image/png, image/jpeg">

          <h2 class="login-title">สมัครสมาชิก</h2>

          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

            <mat-form-field appearance="fill" class="login-field">
              <mat-icon matPrefix>person</mat-icon>
              <input matInput formControlName="username" placeholder="ชื่อผู้ใช้">

              <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
                กรุณากรอกชื่อผู้ใช้
              </mat-error>
              <mat-error *ngIf="registerForm.get('username')?.hasError('minlength')">
                ชื่อผู้ใช้ต้องมีอย่างน้อย 4 ตัวอักษร
              </mat-error>

            </mat-form-field>

            <mat-form-field appearance="fill" class="login-field">
              <mat-icon matPrefix>mail</mat-icon>
              <input matInput formControlName="email" type="email" placeholder="อีเมล">
            </mat-form-field>

            <mat-form-field appearance="fill" class="login-field">
              <mat-icon matPrefix>lock</mat-icon>
              <input matInput formControlName="password" [type]="hidePassword ? 'password' : 'text'"
               placeholder="กรอกรหัสผ่านใหม่อย่างน้อย 6 ตัว">
              <button type="button" mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
                aria-label="Toggle password visibility">
                <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>

            <div *ngIf="registerError" class="login-error-message">
              {{ registerError }}
            </div>

            <div class="actions">
              <button type="submit" mat-flat-button class="login-btn"
                [disabled]="registerForm.invalid">สร้างบัญชี</button>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </div>

  </main>

  <h3 class="footer-text">คุณพร้อมแล้ว เริ่มสนุกกับการช็อปปิ้งใน GameOracle ตอนนี้</h3>
</div>