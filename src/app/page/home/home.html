<app-navber></app-navber>
<div class="home-container">
  <!-- Banners Section -->
  <section class="section banners-section">
    <div class="banner-side">
      <div class="mdc-card mdc-card--outlined banner-card">
        <img
          src="https://placehold.co/200x250/A3E635/333?text=Game+Banner+1"
          alt="Banner 1"
        />
      </div>
    </div>
    <div class="banner-main">
      <div class="mdc-card banner-card">
        <img
          src="https://placehold.co/800x250/F97316/FFF?text=SPIKE+AT+NEW+HEIGHTS!"
          alt="Spike At New Heights!"
          class="main-banner-img"
        />
      </div>
    </div>
    <div class="banner-side">
      <div class="mdc-card mdc-card--outlined banner-card">
        <img
          src="https://placehold.co/200x250/60A5FA/333?text=Game+Banner+2"
          alt="Banner 3"
        />
      </div>
    </div>
  </section>

  <!-- Coupons Section -->
  <section class="section">
    <h2>คูปองที่มีอยู่</h2>
    <p class="section-subtitle">
      ถ้ามีโค้ดส่วนลดของคุณอยู่แล้ว รีบใช้สำหรับการประหยัดเพิ่มเติมสิ!
      อย่ารอช้า...
    </p>

    <div *ngIf="loadingCoupons" class="loading-message">กำลังโหลดคูปอง...</div>

    <div
      class="horizontal-scroll-container"
      *ngIf="!loadingCoupons && coupons.length > 0"
    >
      <div class="coupon-card-alt" *ngFor="let coupon of coupons">
        <div class="coupon-content">
          <div class="discount-label">
            <span *ngIf="coupon.discount_type === 'percent'">
              {{ coupon.discount_value | number : "1.0-0" }}% OFF
            </span>
            <span *ngIf="coupon.discount_type === 'fixed'">
              ฿{{ coupon.discount_value | number : "1.2-2" }} OFF
            </span>
          </div>

          <p class="code-name">โค้ด: {{ coupon.name_code }}</p>
          <p class="code-description">{{ coupon.description }}</p>
        </div>

        <div class="coupon-footer">
          <p class="code-condition" *ngIf="coupon.min_value > 0">
            * ขั้นต่ำ ฿{{ coupon.min_value | number : "1.2-2" }}
          </p>
          <p class="code-condition" *ngIf="coupon.min_value === 0">
            * ไม่มีขั้นต่ำ
          </p>
          <button
            mat-flat-button
            color="primary"
            class="custom-buy-button"
            (click)="claimCoupon(coupon)"
            [disabled]="claimingCouponIds.has(coupon.did) || coupon.isClaimed"
          >
            <span *ngIf="claimingCouponIds.has(coupon.did)"
              >กำลังดำเนินการ...</span
            >
            <span *ngIf="!claimingCouponIds.has(coupon.did) && coupon.isClaimed"
              >รับแล้ว</span
            >
            <span
              *ngIf="!claimingCouponIds.has(coupon.did) && !coupon.isClaimed"
              >รับโค้ด</span
            >
          </button>
        </div>
      </div>
    </div>

    <div
      *ngIf="!loadingCoupons && coupons.length === 0"
      class="no-coupons-message"
    >
      ไม่พบข้อมูลคูปองในขณะนี้
    </div>
  </section>

  <!-- Offers Section -->
  <section class="offers-section">
    <h2>ข้อเสนอพิเศษ</h2>
    <p>
      อย่าพลาดโอกาสที่จะได้รับข้อเสนอพิเศษจากเรา! ค้นหาสิ่งที่คุณชื่นชอบวันนี้!
    </p>

    <div *ngIf="loadingGames" class="loading-message">กำลังโหลดเกม...</div>

    <div
      class="offers-scroll-container"
      *ngIf="!loadingGames && games.length > 0"
    >
      <mat-card class="offer-card" *ngFor="let game of games">
        <div class="offer-image-placeholder">
          <img
            [src]="getFullImageUrl(game.image_game)"
            [alt]="game.title"
            class="game-image"
          />
        </div>

        <mat-card-content>
          <p class="offer-title">{{ game.title }}</p>
          <p class="offer-price">฿{{ game.price | number : "1.2-2" }}</p>
          <!-- Nav buttons (ตามรูปแบบที่ขอ) -->
          <div class="nav-links-row">
            <button
              mat-button
              class="nav-link game-btn"
              [routerLink]="['/GameDetails', game.game_id]"
            >
              รายละเอียด
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <div *ngIf="!loadingGames && games.length === 0" class="no-games-message">
      ไม่พบข้อมูลเกมในขณะนี้
    </div>
  </section>

  <!-- News Section -->
  <section class="section">
    <h2>ข่าว & การโปรโมชั่น</h2>
    <div class="news-grid">
      <mat-card class="news-card">
        <img
          mat-card-image
          src="https://placehold.co/600x400/818CF8/FFFFFF?text=News+Image"
          alt="PUBG Mobile's Spooky 4.0 Lucky Draw Campaign"
        />
        <mat-card-header>
          <mat-card-title
            >PUBG Mobile's Spooky 4.0 Lucky Draw Campaign</mat-card-title
          >
          <mat-card-subtitle
            >by Terry, 18/09/2025 - 0 comment</mat-card-subtitle
          >
        </mat-card-header>
      </mat-card>

      <mat-card class="news-card">
        <img
          mat-card-image
          src="https://placehold.co/600x400/F472B6/FFFFFF?text=News+Image"
          alt="Mega Lucky Draw: Top Up & Win Big"
        />
        <mat-card-header>
          <mat-card-title>Mega Lucky Draw: Top Up & Win Big</mat-card-title>
          <mat-card-subtitle
            >by Terry, 18/09/2025 - 0 comment</mat-card-subtitle
          >
        </mat-card-header>
      </mat-card>

      <mat-card class="news-card">
        <img
          mat-card-image
          src="https://placehold.co/600x400/34D399/FFFFFF?text=News+Image"
          alt="Nintendo Switch Promo! 25% OFF"
        />
        <mat-card-header>
          <mat-card-title>Nintendo Switch Promo! 25% OFF</mat-card-title>
          <mat-card-subtitle
            >by Terry, 18/09/2025 - 0 comment</mat-card-subtitle
          >
        </mat-card-header>
      </mat-card>

      <mat-card class="news-card">
        <img
          mat-card-image
          src="https://placehold.co/600x400/FBBF24/FFFFFF?text=News+Image"
          alt="Haikyuu!! Collaboration Event"
        />
        <mat-card-header>
          <mat-card-title>Haikyuu!! Collaboration Event</mat-card-title>
          <mat-card-subtitle
            >by Terry, 18/09/2025 - 0 comment</mat-card-subtitle
          >
        </mat-card-header>
      </mat-card>

      <mat-card class="news-card">
        <img
          mat-card-image
          src="https://placehold.co/600x400/60A5FA/FFFFFF?text=News+Image"
          alt="Metro Hero Promo is here"
        />
        <mat-card-header>
          <mat-card-title>Metro Hero Promo is here</mat-card-title>
          <mat-card-subtitle
            >by Terry, 18/09/2025 - 0 comment</mat-card-subtitle
          >
        </mat-card-header>
      </mat-card>
    </div>
  </section>
</div>
