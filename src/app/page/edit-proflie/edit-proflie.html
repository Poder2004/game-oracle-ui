<mat-toolbar class="top-toolbar">
    <span class="logo">Game Oracle</span>
</mat-toolbar>
<button mat-icon-button class="hamburger-menu-btn" (click)="toggleProfileSidebar()" aria-label="Open Profile Menu">
    <mat-icon>menu</mat-icon>
</button>
<div class="edit-profile-page">

    <mat-card class="profile-card">

        <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô Header ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ -->
        <div class="card-header">
            <mat-card-title>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</mat-card-title>
            <button mat-icon-button routerLink="/home" aria-label="Back to main page">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <mat-card-content>
            <!-- 
        ‡πÉ‡∏ä‡πâ Flexbox ‡πÅ‡∏ö‡πà‡∏á‡πÇ‡∏ã‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°
      -->
            <div class="content-wrapper">

                <!-- ===== ‡πÇ‡∏ã‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏ã‡πâ‡∏≤‡∏¢) ===== -->
                <div class="profile-pic-section">
                    <div class="profile-pic-container" (click)="fileInput.click()"
                        matTooltip="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">
                        <img [src]="imagePreview || userImageUrl || 'assets/images/default-avatar.png'"
                            alt="Profile Preview">
                        <div class="overlay">
                            <mat-icon>photo_camera</mat-icon>
                            <span>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ</span>
                        </div>
                    </div>
                    <input hidden type="file" #fileInput (change)="onFileSelected($event)"
                        accept="image/png, image/jpeg">
                    <p class="pic-hint">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û .jpg ‡∏´‡∏£‡∏∑‡∏≠ .png</p>
                </div>

                <!-- ===== ‡πÇ‡∏ã‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏Ç‡∏ß‡∏≤) ===== -->
                <div class="form-section">
                    <form [formGroup]="editForm" (ngSubmit)="onSubmit()">

                        <mat-form-field appearance="outline">
                            <mat-label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</mat-label>
                            <mat-icon matPrefix>person_outline</mat-icon>
                            <input matInput formControlName="username">
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</mat-label>
                            <mat-icon matPrefix>mail_outline</mat-icon>
                            <input matInput formControlName="email" type="email">

                            <!-- üëá ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ -->
                            <mat-error *ngIf="editForm.get('email')?.hasError('email')">
                                ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)</mat-label>
                            <mat-icon matPrefix>lock_outline</mat-icon>
                            <input matInput formControlName="password" type="password"
                                placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß">
                        </mat-form-field>

                        <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Success/Error -->
                        <div *ngIf="successMessage" class="message success">
                            <mat-icon>check_circle</mat-icon>
                            <span>{{ successMessage }}</span>
                        </div>
                        <div *ngIf="errorMessage" class="message error">
                            <mat-icon>error</mat-icon>
                            <span>{{ errorMessage }}</span>
                        </div>

                        <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° -->
                        <div class="actions">
                            <button mat-stroked-button color="basic" routerLink="/main">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                            <button mat-raised-button color="primary" type="submit"
                                [disabled]="editForm.invalid || editForm.pristine">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>

<div class="profile-overlay" [class.open]="isProfileOpen" (click)="toggleProfileSidebar()">
</div>

<aside class="profile-sidebar" [class.open]="isProfileOpen">
    <div *ngIf="currentUser" class="profile-details">
        <div class="avatar-container">
            <img [src]="currentUser.image_profile" alt="User Avatar">
        </div>
        <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>

        <div class="info-field">
            <label>Name User</label>
            <div class="info-value">
                <mat-icon>person</mat-icon>
                <span>{{ currentUser.username }}</span>
            </div>
        </div>
        <div class="info-field">
            <label>Gmail User</label>
            <div class="info-value">
                <mat-icon>mail</mat-icon>
                <span>{{ currentUser.email }}</span>
            </div>
        </div>
        <div class="info-field">
            <label>Wallet Balance</label>
            <div class="info-value">
                <mat-icon>account_balance_wallet</mat-icon>
                <span>{{ currentUser.wallet | number:'1.2-2' }}</span>
            </div>
        </div>
    </div>

    <div class="sidebar-footer">

        <button mat-flat-button class="footer-btn primary-btn" routerLink="/editprofile">
            <mat-icon>person</mat-icon>
            <span>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span>
        </button>

        <button mat-flat-button class="footer-btn primary-btn" routerLink="/home">
            <mat-icon>home</mat-icon>
            <span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
        </button>

        <button mat-flat-button class="footer-btn secondary-btn" (click)="logout()">
            <mat-icon>exit_to_app</mat-icon>
            <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
        </button>

    </div>
</aside>