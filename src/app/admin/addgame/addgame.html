<app-navadmin></app-navadmin>
<div class="page-container">
  <form class="form-card" #gameForm="ngForm" (ngSubmit)="onSubmit(gameForm)">
    <div class="form-header">
      <h1>เพิ่มเกมส์ใหม่</h1>
      <p>กรอกรายละเอียดเพื่อเพิ่มเกมใหม่ลงในคลังของคุณ</p>
    </div>

    <div class="form-group">
      <label class="image-upload-box" for="gameImage">
        <input type="file" id="gameImage" (change)="onFileSelected($event)" accept="image/png, image/jpeg, image/webp"
          name="gameImage" ngModel required #imageInput="ngModel" />
        <div *ngIf="!previewUrl" class="upload-prompt">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-upload"
            viewBox="0 0 16 16">
            <path
              d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
            <path
              d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
          </svg>
          <span>Click to upload game image</span>
          <small>PNG, JPG or WEBP (max. 5MB)</small>
        </div>
        <img *ngIf="previewUrl" [src]="previewUrl" class="image-preview" alt="Game Preview" />
      </label>
    </div>

    <div class="form-group">
      <label for="gameName">ชื่อเกมส์</label>
      <input type="text" id="gameName" name="gameName" placeholder="กรอกชื่อเกมส์" ngModel required />
    </div>

    <div class="form-group">
      <label for="gameDescription">รายละเอียดเกมส์</label>
      <textarea id="gameDescription" name="gameDescription" rows="4" placeholder="กรอกรายละเอียด..." ngModel
        required></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="gamePrice">ราคา</label>
        <input type="number" id="gamePrice" name="gamePrice" placeholder="$ 0.0" ngModel required min="0" />
      </div>
      <div class="form-group">
        <label for="gameCategory">ประเภท</label>
        <select id="gameCategory" name="gameCategory" ngModel required>
          <option [ngValue]="null" disabled>เลือกประเภท</option>
          <option *ngFor="let cat of categories" [value]="cat.category_id">{{ cat.category_name }}</option>
        </select>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-add" [disabled]="gameForm.invalid">เพิ่ม</button>
      <button type="button" class="btn btn-cancel" (click)="onCancel(gameForm)">ยกเลิก</button>
    </div>
  </form>
</div>