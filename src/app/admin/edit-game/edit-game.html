<app-navadmin></app-navadmin>

<!-- แก้ไข class. เป็น class= -->
<div class="page-container">
  <form class="form-card" [formGroup]="editForm" (ngSubmit)="onSubmit()">
    <div class="form-header">
      <h1>แก้ไขข้อมูลเกมส์</h1>
      <p>{{ currentGame?.title || 'กำลังโหลด...' }}</p>
    </div>

    <!-- ส่วนแสดงข้อความ Feedback -->
    <div *ngIf="submitSuccess" class="feedback-message success">{{ submitSuccess }}</div>
    <div *ngIf="submitError" class="feedback-message error">{{ submitError }}</div>

    <!-- ส่วนอัปโหลดรูปภาพ -->
    <div class="form-group">
      <label class="image-upload-box" for="gameImage">
        <input type="file" id="gameImage" (change)="onFileSelected($event)" accept="image/*" formControlName="image" />
        <div *ngIf="!previewUrl" class="upload-prompt">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
          </svg>
          <span>Click to change game image</span>
        </div>
        <img *ngIf="previewUrl" [src]="previewUrl" class="image-preview" alt="Game Preview" />
      </label>
    </div>

    <!-- Input Fields -->
    <div class="form-group">
      <label for="title">ชื่อเกมส์</label>
      <input type="text" id="title" placeholder="กรอกชื่อเกมส์" formControlName="title" />
    </div>

    <div class="form-group">
      <label for="description">รายละเอียดเกมส์</label>
      <textarea id="description" rows="4" placeholder="กรอกรายละเอียด..." formControlName="description"></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="price">ราคา</label>
        <input type="number" id="price" placeholder="$ 0.0" formControlName="price" />
      </div>
      <div class="form-group">
        <label for="category_id">ประเภท</label>
        <select id="category_id" formControlName="category_id">
          <option [ngValue]="null" disabled>เลือกประเภท</option>
          <option *ngFor="let cat of categories" [value]="cat.category_id">{{ cat.category_name }}</option>
        </select>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-actions">
      <button type="submit" class="btn btn-add" [disabled]="editForm.pristine || editForm.invalid">
        บันทึกการเปลี่ยนแปลง
      </button>
      <button type="button" class="btn btn-cancel" (click)="onCancel()">ยกเลิก</button>
    </div>
  </form>
</div>

